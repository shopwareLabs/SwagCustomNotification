{% sw_extends '@Storefront/storefront/base.html.twig' %}
{% set consentCookieKey = 'sw-consent-manager-accepted' %}

{% block base_header %}
    {% if shopware.config.SwagCustomNotification.config.showBanner %}
        {% sw_include '@SwagCustomNotification/storefront/layout/header/banner.html.twig' %}
    {% endif %}

    {{ parent() }}
{% endblock %}

{% block base_main %}
    {%
        if shopware.config.SwagCustomNotification.config.showConsentPopup
        and not app.request.cookies.get(consentCookieKey)
    %}
        {% sw_include '@SwagCustomNotification/storefront/layout/modal/consent.html.twig' %}
    {% else %}
        {{ parent() }}

        {% if shopware.config.SwagCustomNotification.config.showNewsletter %}
            {% sw_include '@SwagCustomNotification/storefront/layout/modal/newsletter-popup.html.twig' %}
        {% endif %}
    {% endif %}
{% endblock %}


{% block base_pseudo_modal %}
    {{ parent() }}

    {% if shopware.config.SwagCustomNotification.config.showInfoPopup %}
        {% sw_include '@SwagCustomNotification/storefront/layout/modal/info.html.twig' %}
    {% endif %}
{% endblock %}
